sudo: false

env:
  global:
    - DOC_REF: github.com/brendanhay/gogol-doc.git
    - secure: fxJPfu/icH+3w9nRcedFtqNumnpmo1vWAA7HBaeeCF0vnzTHBbD2ej3olyaDmFoJ9PaW84q5UKX3iU6BBXLmlestOZCcfQ9nDvVuIVpimIovO7QuZhnRYea0SaSRcXEgNE+nWEcsiiKWuVUnDEXAUQRCs04YQpAvgsUjMcZgXQw=

cache:
  apt: true
  directories:
    - ~/.stack

branches:
  only:
    - master
    - develop

before_install:
    - export PATH=/opt/ghc/$GHCVER/bin:$PATH
    - export PATH=~/.local/bin:$PATH
    - ./script/travis-lifecycle-before_install

install:
    - ./script/travis-lifecycle-install

script:
    - ./script/travis-lifecycle-script

matrix:
  fast_finish: true
  include:
    # Below is auto-generated by ./scripts/travis-matrix >> .travis.yml

    # Documentation
    - env: GHCVER=7.10.2 LIBRARY=documentation
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }

    # Core
    - env: GHCVER=7.10.2 LIBRARY=gogol-core
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }

    # Priority
    - env: GHCVER=7.10.2 LIBRARY=gogol-compute
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-drive
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-appengine
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-storage
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-oauth2
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-gmail
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }

    # Remainder
    - env: GHCVER=7.10.2 LIBRARY=gogol-adexchange-buyer
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-adexchange-seller
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-admin-datatransfer
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-admin-directory
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-admin-emailmigration
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-admin-reports
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-adsense
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-appengine
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-compute
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-drive
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-gmail
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-oauth2
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
    - env: GHCVER=7.10.2 LIBRARY=gogol-storage
      addons: { apt: { packages: [ghc-7.10.2], sources: [hvr-ghc] } }
